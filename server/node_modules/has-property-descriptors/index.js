'use strict';

const defineProperty = require('es-define-property');

// Check if the environment supports property descriptors
const hasPropertyDescriptors = () => {
  return !!defineProperty;
};

// Check if there's a bug in defining array lengths
const hasArrayLengthDefineBug = () => {
  if (!defineProperty) {
    return null;
  }

  try {
    const arr = [0];
    defineProperty(arr, 'length', { value: 1 });
    return arr.length !== 1;
  } catch (e) {
    // In Firefox 4-22, defining length on an array throws an exception.
    if (e.name === 'TypeError' && e.message.includes('set')) {
      return true;
    }
    throw e;
  }
};

module.exports = {
  hasPropertyDescriptors,
  hasArrayLengthDefineBug,
};
